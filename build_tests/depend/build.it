action("all") {
    build: ["*"],
    clean: ["*"]
}

// This is a dummy rule
rule("p", "Printer") {
    accepts: ["*.c"],
    output: {
        pattern: "o.o",
        expected: "o.o"
    },
    build: function(input, output, targetName, target) {
        print "Target [${targetName}]: ${target}"
    }
}

target("lib", "p") {
    input: ["lib.c"],
    exports: {
        foo: "bar"
    },
    configure: function() {
        print "I am lib~"
        return true;
    }
}

target("main", "p") {
    input: ["test.c"],
    needs: ["lib"],
    configure: function() {
        print "I am main~"
        return true;
    }
}
